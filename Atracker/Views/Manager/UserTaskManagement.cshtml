@model IEnumerable<Atracker.Models.ApplicationUser>

@{
    ViewData["Title"] = "User & Task Management";
    Layout = "~/Views/Shared/_MangerLayout.cshtml";
}

<div class="custom-card">
    <h2 class="mb-4">Welcome To Manger Dashboard</h2>
    <div class="custom-card">
        <h4 class="mb-3">Users & Task Management</h4>

        <!-- Top Search/Feedback Bar -->
        <div class="d-flex justify-content-between align-items-center mb-3 p-2 bg-light border rounded">
            <form asp-action="UserTaskManagement" method="get" class="d-flex w-50">
                <input type="search" name="searchString" class="form-control me-2" placeholder="Search by name or email..." value="@ViewData["CurrentFilter"]" />
                <button type="submit" class="btn btn-outline-secondary">🔍</button>
            </form>
            <div>
                <button class="btn btn-sm btn-secondary">Bulk Feedback</button>
            </div>
        </div>

        <!-- User List -->
        <a asp-action="AddTracker" class="btn btn-success mb-3">Add New Tracker</a>

        <form asp-action="BulkFeedback" method="post">
            @foreach (var user in Model)
            {
                <div class="list-item">
                    <div>
                        <input type="checkbox" name="selectedUserIds" value="@user.Id" class="form-check-input me-2">
                        <span>@user.FullName | @user.Email | @(user.PhoneNumber ?? "No contact number")</span>
                    </div>
                    <div>
                        <a asp-action="EditTracker" asp-route-id="@user.Id" class="btn btn-update btn-sm">update</a>
                        <a asp-action="Feedback" asp-route-id="@user.Id" class="btn btn-purple btn-sm">feedback</a>
                        <a asp-action="DeleteTracker" asp-route-id="@user.Id" class="btn btn-danger btn-sm">🗑️</a>
                    </div>
                </div>
            }
        </form>
    </div>
</div>